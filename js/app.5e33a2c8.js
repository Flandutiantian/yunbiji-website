(function(){var t={9707:function(t,e,o){"use strict";var n=o(9230);const r={REGISTER:"/auth/register",LOGIN:"auth/login",LOGOUT:"/auth/logout",GET_INFO:"/auth"};e["Z"]={register({username:t,password:e}){return(0,n.Z)(r.REGISTER,"POST",{username:t,password:e})},login({username:t,password:e}){return(0,n.Z)(r.LOGIN,"POST",{username:t,password:e})},logout(){return(0,n.Z)(r.LOGOUT)},getInfo(){return(0,n.Z)(r.GET_INFO)}}},2573:function(t,e,o){"use strict";var n=o(9230),r=o(8720);const s={GET:"/notebooks",ADD:"/notebooks",UPDATE:"/notebooks/:id",DELETE:"/notebooks/:id"};e["Z"]={getAll(){return new Promise(((t,e)=>{(0,n.Z)(s.GET).then((e=>{e.data=e.data.sort(((t,e)=>t.createAt<e.createAt?1:-1)),e.data.forEach((t=>{t.createdAtFriendly=(0,r.o)(t.createdAt),t.updatedAtFriendly=(0,r.o)(t.updatedAt)})),t(e)})).catch((t=>{e(t)}))}))},updateNotebook(t,{title:e=""}={title:""}){return(0,n.Z)(s.UPDATE.replace(":id",t),"PATCH",{title:e})},deleteNotebook(t){return(0,n.Z)(s.DELETE.replace(":id",t),"DELETE")},addNotebook({title:t=""}={title:""}){return new Promise(((e,o)=>{(0,n.Z)(s.ADD,"POST",{title:t}).then((t=>{t.data.createdAtFriendly=(0,r.o)(t.data.createdAt),t.data.updatedAtFriendly=(0,r.o)(t.data.updatedAt),e(t)})).catch((t=>{o(t)}))}))}}},6413:function(t){t.exports={baseURL:"https://note-server.hunger-valley.com"}},9230:function(t,e,o){"use strict";o.d(e,{Z:function(){return d}});var n=o(6265),r=o.n(n),s=o(6413),a=o.n(s),u=o(8499);function d(t,e="GET",o={}){return new Promise(((n,s)=>{let a={url:t,method:e,validateStatus(t){return t>=200&&t<300||400===t}};"get"===e.toLowerCase()?a.params=o:a.data=o,r()(a).then((t=>{200===t.status?n(t.data):(u.Message.error(t.data.msg),s(t.data))})).catch((t=>{u.Message.error("网络异常"),s({msg:"网络异常"})}))}))}r().defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",r().defaults.baseURL=a().baseURL,r().defaults.withCredentials=!0},8720:function(t,e,o){"use strict";function n(t){let e="object"===typeof t?t:new Date(t),o=e.getTime(),n=Date.now(),r=n-o,s="";switch(!0){case r<6e4:s="刚刚";break;case r<36e5:s=`${Math.floor(r/6e4)}分钟前`;break;case r<864e5:s=`${Math.floor(r/36e5)}小时前`;break;default:s=`${Math.floor(r/864e5)}天前`}return s}o.d(e,{o:function(){return n}})},6661:function(t,e,o){"use strict";var n=o(3032),r=o(8499),s=o.n(r),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Sidebar"),e("router-view")],1)},u=[],d=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"sidebar"}},[e("avatar"),e("div",{staticClass:"icons"},[e("router-link",{attrs:{to:"/note",title:"笔记"}},[e("i",{staticClass:"iconfont icon-note"})]),e("router-link",{attrs:{to:"/notebooks",title:"笔记本"}},[e("i",{staticClass:"iconfont icon-notebook"})]),e("router-link",{attrs:{to:"/trash",title:"回收站"}},[e("i",{staticClass:"iconfont icon-trash"})])],1),e("div",{staticClass:"logout"},[e("i",{staticClass:"iconfont icon-logout",on:{click:t.logout}})])],1)},i=[],c=function(){var t=this,e=t._self._c;return e("span",{attrs:{title:t.username}},[t._v(t._s(t.slug))])},l=[],f=o(9707),h=(new n["default"],o(3822)),p={data(){return{}},created(){this.setUser()},methods:{...(0,h.nv)({setUser:"checkLogin"})},computed:{...(0,h.Se)(["username","slug"])}},m=p,b=o(1001),g=(0,b.Z)(m,c,l,!1,null,"c838c716",null),k=g.exports,N={components:{avatar:k},methods:{logout(){console.log("logout"),f.Z.logout().then((t=>{console.log(t),this.$router.push({path:"/login"})}))}}},v=N,I=(0,b.Z)(v,d,i,!1,null,"0e6c4ffa",null),T=I.exports,E={name:"App",components:{Sidebar:T}},A=E,y=(0,b.Z)(A,a,u,!1,null,null,null),w=y.exports,Z=o(2631);const P=Z.Z.prototype.push;Z.Z.prototype.push=function(t){return P.call(this,t).catch((t=>t))},n["default"].use(Z.Z);var C=new Z.Z({routes:[{path:"/",alias:"/notebooks",component:()=>o.e(651).then(o.bind(o,651))},{path:"/login",name:"Login",component:()=>o.e(40).then(o.bind(o,143))},{path:"/note",component:()=>Promise.all([o.e(812),o.e(429)]).then(o.bind(o,5429))},{path:"/trash",component:()=>Promise.all([o.e(812),o.e(508)]).then(o.bind(o,508))}]}),O=o(2573);const L={notebooks:null,curBookId:null},D={notebooks:t=>t.notebooks||[],curBook:t=>Array.isArray(t.notebooks)?t.curBookId?t.notebooks.find((e=>e.id==t.curBookId))||{}:t.notebooks[0]:{}},S={setNotebooks(t,e){t.notebooks=e.notebooks},addNotebook(t,e){t.notebooks.unshift(e.notebook)},updateNotebook(t,e){let o=t.notebooks.find((t=>t.id==e.notebookId))||{};o.title=e.title},deleteNotebook(t,e){t.notebooks=t.notebooks.filter((t=>t.id!==e.notebookId))},setCurBook(t,e){t.curBookId=e.curBookId}},j={getNotebooks({commit:t,state:e}){return null!==e.notebooks?Promise.resolve():O.Z.getAll().then((e=>{t("setNotebooks",{notebooks:e.data})}))},addNotebook({commit:t},e){return O.Z.addNotebook({title:e.title}).then((e=>{t("addNotebook",{notebook:e.data}),r.Message.success(e.msg)}))},updateNotebook({commit:t},e){return O.Z.updateNotebook(e.notebookId,{title:e.title}).then((o=>{t("updateNotebook",{notebookId:e.notebookId,title:e.title}),r.Message.success(o.msg)}))},deleteNotebook({commit:t},e){return O.Z.deleteNotebook(e.notebookId).then((o=>{t("deleteNotebook",{notebookId:e.notebookId}),r.Message.success(o.msg)}))}};var _={state:L,getters:D,mutations:S,actions:j},F=o(9230),U=o(8720);const G={GET:"/notes/from/:notebookId",ADD:"/notes/to/:notebookId",UPDATE:"/notes/:noteId",DELETE:"/notes/:noteId"};var M={getAll({notebookId:t}){return new Promise(((e,o)=>{(0,F.Z)(G.GET.replace(":notebookId",t)).then((t=>{t.data=t.data.map((t=>(t.createdAtFriendly=(0,U.o)(t.createdAt),t.updatedAtFriendly=(0,U.o)(t.updatedAt),t))).sort(((t,e)=>t.updatedAt<e.updatedAt)),e(t)})).catch((t=>{o(t)}))}))},updateNote({noteId:t},{title:e,content:o}){return(0,F.Z)(G.UPDATE.replace(":noteId",t),"PATCH",{title:e,content:o})},deleteNote({noteId:t}){return(0,F.Z)(G.DELETE.replace(":noteId",t),"DELETE")},addNote({notebookId:t},{title:e="",content:o=""}={title:"",content:""}){return new Promise(((n,r)=>{(0,F.Z)(G.ADD.replace(":notebookId",t),"POST",{title:e,content:o}).then((t=>{t.data.createdAtFriendly=(0,U.o)(t.data.createdAt),t.data.updatedAtFriendly=(0,U.o)(t.data.updatedAt),n(t)})).catch((t=>{r(t)}))}))}};const x={notes:null,curNoteId:null},R={notes:t=>t.notes||[],curNote:t=>Array.isArray(t.notes)?t.curNoteId?t.notes.find((e=>e.id==t.curNoteId))||{}:t.notes[0]||{}:{}},B={setNote(t,e){t.notes=e.notes},addNote(t,e){t.notes.unshift(e.note)},updateNote(t,e){let o=t.notes.find((t=>t.id==e.noteId))||{};o.title=e.title,o.content=e.content},deleteNote(t,e){t.notes=t.notes.filter((t=>t.id!==e.noteId))},setCurNote(t,e){t.curNoteId=e.curNoteId}},H={getNotes({commit:t},{notebookId:e}){return M.getAll({notebookId:e}).then((e=>{t("setNote",{notes:e.data})}))},addNote({commit:t},{notebookId:e,title:o,content:n}){return M.addNote({notebookId:e},{title:o,content:n}).then((e=>{t("addNote",{note:e.data})}))},updateNote({commit:t},{noteId:e,title:o,content:n}){return M.updateNote({noteId:e},{title:o,content:n}).then((r=>{t("updateNote",{noteId:e,title:o,content:n})}))},deleteNote({commit:t},{noteId:e}){return M.deleteNote({noteId:e}).then((o=>{t("deleteNote",{noteId:e}),r.Message.success(o.msg)}))}};var $={state:x,getters:R,mutations:B,actions:H};const q={GET:"/notes/trash",REVERT:"/notes/:noteId/revert",DELETE:"/notes/:noteId/confirm"};var V={getAll(){return new Promise(((t,e)=>{(0,F.Z)(q.GET).then((e=>{e.data=e.data.sort(((t,e)=>t.createdAt<e.createdAt?1:-1)),e.data.forEach((t=>{t.createdAtFriendly=(0,U.o)(t.createdAt),t.updatedAtFriendly=(0,U.o)(t.updatedAt)})),t(e)})).catch((t=>{e(t)}))}))},deleteNote({noteId:t}){return(0,F.Z)(q.DELETE.replace(":noteId",t),"DELETE")},revertNote({noteId:t}){return(0,F.Z)(q.REVERT.replace(":noteId",t),"PATCH")}};const K={trashNotes:null,curTrashNoteId:null},z={trashNotes:t=>t.trashNotes||[],curTrashNote:(t,e)=>t.curTrashNoteId?t.trashNotes.find((e=>e.id==t.curTrashNoteId))||{}:e.trashNotes[0]||{},belongTo:(t,e,o,n)=>{let r=n.notebooks.find((t=>t.id==e.curTrashNote.notebookId))||{};return r.title||""}},J={setTrashNotes(t,e){t.trashNotes=e.trashNotes},addTrashNote(t,e){setTrashNotes.unshift(e.note)},deleteTrashNote(t,e){t.trashNotes=t.trashNotes.filter((t=>t.id!=e.noteId))},setCurTrashNote(t,e){t.curTrashNoteId=e.curTrashNoteId}},Q={getTrashNotes({commit:t}){return V.getAll().then((e=>{t("setTrashNotes",{trashNotes:e.data})}))},deleteTrashNote({commit:t},{noteId:e}){return V.deleteNote({noteId:e}).then((o=>{t("deleteTrashNote",{noteId:e}),r.Message.success(o.msg)}))},revertTrashNote({commit:t},{noteId:e}){return V.revertNote({noteId:e}).then((o=>{t("deleteTrashNote",{noteId:e}),r.Message.success(o.msg)}))}};var W={state:K,getters:z,mutations:J,actions:Q};window.router=C;const X={user:null},Y={username:t=>null===t.user?"未登录":t.user.username,slug:t=>null===t.user?"未":t.user.username.charAt(0)},tt={setUser(t,e){t.user=e.user}},et={login({commit:t},{username:e,password:o}){return f.Z.login({username:e,password:o}).then((e=>{t("setUser",{user:e.data})}))},register({commit:t},{username:e,password:o}){return f.Z.register({username:e,password:o}).then((e=>{t("setUser",{user:e.data})}))},checkLogin({commit:t,state:e},o){return null!=e.user?Promise.resolve():f.Z.getInfo().then((e=>{e.isLogin?t("setUser",{user:e.data}):(console.log("jump"),C.push(o))}))}};var ot={state:X,getters:Y,mutations:tt,actions:et};n["default"].use(h.ZP);var nt=new h.ZP.Store({modules:{notebook:_,note:$,trash:W,user:ot}});n["default"].use(s()),n["default"].config.productionTip=!1,window.vm=new n["default"]({el:"#app",store:nt,router:C,components:{App:w},template:"<App/>"})}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(s.exports,s,s.exports,o),s.loaded=!0,s.exports}o.m=t,function(){var t=[];o.O=function(e,n,r,s){if(!n){var a=1/0;for(c=0;c<t.length;c++){n=t[c][0],r=t[c][1],s=t[c][2];for(var u=!0,d=0;d<n.length;d++)(!1&s||a>=s)&&Object.keys(o.O).every((function(t){return o.O[t](n[d])}))?n.splice(d--,1):(u=!1,s<a&&(a=s));if(u){t.splice(c--,1);var i=r();void 0!==i&&(e=i)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[n,r,s]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.f={},o.e=function(t){return Promise.all(Object.keys(o.f).reduce((function(e,n){return o.f[n](t,e),e}),[]))}}(),function(){o.u=function(t){return"js/"+t+"."+{40:"4fe7f82f",429:"5315d198",508:"eb9d3263",651:"3dfd5691",812:"51e0f9aa"}[t]+".js"}}(),function(){o.miniCssF=function(t){return"css/"+t+"."+{40:"fd3cc1d8",429:"93ae9b5d",508:"af250d8a",651:"8dcb2b25"}[t]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="yunbiji:";o.l=function(n,r,s,a){if(t[n])t[n].push(r);else{var u,d;if(void 0!==s)for(var i=document.getElementsByTagName("script"),c=0;c<i.length;c++){var l=i[c];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==e+s){u=l;break}}u||(d=!0,u=document.createElement("script"),u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.setAttribute("data-webpack",e+s),u.src=n),t[n]=[r];var f=function(e,o){u.onerror=u.onload=null,clearTimeout(h);var r=t[n];if(delete t[n],u.parentNode&&u.parentNode.removeChild(u),r&&r.forEach((function(t){return t(o)})),e)return e(o)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),d&&document.head.appendChild(u)}}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){o.p=""}(),function(){var t=function(t,e,o,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var s=function(s){if(r.onerror=r.onload=null,"load"===s.type)o();else{var a=s&&("load"===s.type?"missing":s.type),u=s&&s.target&&s.target.href||e,d=new Error("Loading CSS chunk "+t+" failed.\n("+u+")");d.code="CSS_CHUNK_LOAD_FAILED",d.type=a,d.request=u,r.parentNode.removeChild(r),n(d)}};return r.onerror=r.onload=s,r.href=e,document.head.appendChild(r),r},e=function(t,e){for(var o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var r=o[n],s=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(s===t||s===e))return r}var a=document.getElementsByTagName("style");for(n=0;n<a.length;n++){r=a[n],s=r.getAttribute("data-href");if(s===t||s===e)return r}},n=function(n){return new Promise((function(r,s){var a=o.miniCssF(n),u=o.p+a;if(e(a,u))return r();t(n,u,r,s)}))},r={143:0};o.f.miniCss=function(t,e){var o={40:1,429:1,508:1,651:1};r[t]?e.push(r[t]):0!==r[t]&&o[t]&&e.push(r[t]=n(t).then((function(){r[t]=0}),(function(e){throw delete r[t],e})))}}(),function(){var t={143:0};o.f.j=function(e,n){var r=o.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var s=new Promise((function(o,n){r=t[e]=[o,n]}));n.push(r[2]=s);var a=o.p+o.u(e),u=new Error,d=function(n){if(o.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;u.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",u.name="ChunkLoadError",u.type=s,u.request=a,r[1](u)}};o.l(a,d,"chunk-"+e,e)}},o.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,s,a=n[0],u=n[1],d=n[2],i=0;if(a.some((function(e){return 0!==t[e]}))){for(r in u)o.o(u,r)&&(o.m[r]=u[r]);if(d)var c=d(o)}for(e&&e(n);i<a.length;i++)s=a[i],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(c)},n=self["webpackChunkyunbiji"]=self["webpackChunkyunbiji"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(6661)}));n=o.O(n)})();
//# sourceMappingURL=app.5e33a2c8.js.map